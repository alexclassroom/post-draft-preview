"use strict";(window.pdpWebpackJsonpCallback=window.pdpWebpackJsonpCallback||[]).push([[1],{0:function(t,e,n){n("Xpiy"),n("3aVS"),t.exports=n("X90T")},"3aVS":function(t,e){},KEXi:function(t,e,n){(function(t){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,"a",function(){return i});var i=function(){function e(){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==window.pdp.post&&(this.previewUrl=window.pdp.post.previewUrl||"#",this.status=window.pdp.post.status||0,this.changeStatusNonce=window.pdp.post.changeStatusNonce||"",this.getStatusNonce=window.pdp.post.getStatusNonce||"",this.id=window.pdp.post.id||0,this.label=this.getLabel(status),t(document).on("pdp_gutenberg_loaded",function(){n.addPreviewButtonForGutenberg()}),t(document).on("pdp_editor_loaded",function(){n.addButtonForClassicEditor()}),this.initGutenbergLoadEvent(),this.initEditorLoadEvent(),this.initClickAction())}var n,i;return n=e,(i=[{key:"initClickAction",value:function(){var e=this;t("body").on("click",".button--pdp-change-status",function(n){n.preventDefault(),t.ajax({url:pdp.ajaxurl,type:"post",dataType:"json",data:{action:"pdp-change-status",id:e.id,confirmation:1,nonce:e.changeStatusNonce}}).success(function(n){var a=t(".pdp-preview-url");t(".button--pdp-change-status").html(e.getLabel(n.data.status)),a.attr("href",n.data.previewUrl),a.find("input").val(n.data.previewUrl),1===n.data.status?a.show():a.hide()})})}},{key:"getLabel",value:function(t){return(t?"&#10007; Disable":"&#10003; Enable")+" PDP"}},{key:"addPreviewButtonForGutenberg",value:function(){var e=t("button.block-editor-post-preview__button-toggle"),n=t('<a class="pdp-preview-url" href="'.concat(this.previewUrl,'" target="_blank"><input type="text" value="').concat(this.previewUrl,'" readonly></a>'));e&&t('<a class="components-button is-secondary button--pdp-change-status" href="#">'.concat(this.label,"</a>")).insertBefore(e),1!==this.status&&n.hide(),n.insertBefore(e)}},{key:"addButtonForClassicEditor",value:function(){var e=t(".button#post-preview"),n=t("<div>"),a=t('<a class="pdp-preview-url" href="'.concat(this.previewUrl,'" target="_blank"><input type="text" value="').concat(this.previewUrl,'" readonly></a>'));e&&t('<a class="preview button is-pdp-preview button--pdp-change-status" href="#">'.concat(this.label,"</a>")).appendTo(n),1!==this.status&&a.hide(),a.appendTo(n),n.insertAfter(e)}},{key:"initGutenbergLoadEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3;if(t("#editor").length>0)var n=setInterval(function(){e-=250,(t(".wp-block-post-title").length>0||t("#post-title-0").length>0)&&(t(document).trigger("pdp_gutenberg_loaded"),clearInterval(n)),e<=0&&(t(document).trigger("pdp_gutenberg_notloaded"),clearInterval(n))},250)}},{key:"initEditorLoadEvent",value:function(){t("#postdivrich").length>0&&t(document).trigger("pdp_editor_loaded")}}])&&a(n.prototype,i),e}()}).call(this,n("xeH2"))},X90T:function(t,e){},Xpiy:function(t,e,n){n.r(e),function(t){var e=n("KEXi"),a=n("epjV");t(document).ready(function(){new e.a,new a.a})}.call(this,n("xeH2"))},epjV:function(t,e,n){(function(t){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n.d(e,"a",function(){return i});var i=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==window.pdp.dashboard&&(this.issetButton("data-remove")&&this.initDataAction("data-remove"),this.issetButton("data-reset")&&this.initDataAction("data-reset"))}var n,i;return n=e,(i=[{key:"issetButton",value:function(e){return void 0!==e&&t(".pdp-dashboard .button--".concat(e)).length>0}},{key:"initDataAction",value:function(e){var n=this,a=t(".pdp-dashboard .button--"+e);a.on("click",function(i){i.preventDefault(),confirm("Are you sure?")&&t.ajax({url:pdp.ajaxurl,type:"post",dataType:"json",data:{action:"pdp-"+e,confirmation:1,nonce:n.getNonceByButton(e)}}).success(function(t){n.showMessage(t,a)}).fail(function(t,e){console.error(e)})})}},{key:"getNonceByButton",value:function(t){if(void 0===t)return"";var e=t.split("-");if(e.length<2)return"";var n=e[1]+"Nonce";return void 0===pdp.dashboard.data[n]?"":pdp.dashboard.data[n]}},{key:"showMessage",value:function(e,n){var a=t('<div class="notice notice-'+(e.success?"success":"warning")+' is-dismissible"><p>'+e.data.message+"</p></div>").hide();n.after(a),a.fadeIn("fast"),setTimeout(function(){a.fadeOut("fast")},5e3)}}])&&a(n.prototype,i),e}()}).call(this,n("xeH2"))},xeH2:function(t,e){t.exports=jQuery}},[[0,0]]]);
